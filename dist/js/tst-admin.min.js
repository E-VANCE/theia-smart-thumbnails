var tst=tst||{};tst.togglePreview=function(i){var t=jQuery(".theiaSmartThumbnails_mediaUpload ._preview");"Show Preview"==(i=jQuery(i)).val()?(i.val("Hide Preview"),t.show()):(i.val("Show Preview"),t.hide())},tst.createPickerDelayed=function(i){var t;0<jQuery(i.input).size()?tst.createPickerDelayedHelper(i):setTimeout((t=i,function(){tst.createPickerDelayed(t)}),50)},tst.createPickerDelayedHelper=function(i){jQuery(".compat-field-theiaSmartThumbnails_position").hide(),tst.createPicker(i)},tst.createPicker=function(i){var r=this,a=jQuery;r.options=a.extend({image:"",input:"",preview:"",sizes:[],position:{x:.5,y:.5}},i),r.init=function(){var o,i;r.mouseIsDown=!1,r.isLoading=!1,r.position=r.options.position,r.input=a(r.options.input),r.imageContainer=a(r.options.image),r.image=r.imageContainer.children("img"),r.imageOverlay=a('<div class="_overlay">'),r.crosshair=a('<div class="_crosshair tst-icon-target2">'),r.preview=a(r.options.preview),r.imageContainer.append(r.crosshair,r.imageOverlay),r.imageObject=document.createElement("img"),r.imageObject.onload=(o=r,function(){var i,t,e=o.imageContainer.width()-4;for(i in o.options.sizes)(t=o.options.sizes[i]).width=parseInt(t.width),t.height=parseInt(t.height),t.width>t.height?t.width>e&&(t.height=t.height/t.width*e,t.width=e):t.height>e&&(t.width=t.width/t.height*e,t.height=e),o.options.sizes[i]=t;for(i in o.options.sizes)(t=o.options.sizes[i]).image=a('<img src="'+o.image.attr("src")+'">'),t.imageContainer=a('<div class="_imageContainer">').css({width:t.width,height:t.height}).append(t.image),t.caption=a('<div class="_caption">'+i+"</div>"),t.div=a("<div>").append(t.imageContainer,t.caption),o.preview.append(t.div);o.refreshPreview(),tst.previewButtonStatus&&jQuery(".theiaSmartThumbnails_mediaUpload ._previewButton").val(tst.previewButtonStatus).click().click(),tst.scrollTop&&(o.input.closest(".attachment-info").scrollTop(tst.scrollTop),tst.scrollTop=null)}),r.imageObject.src=r.image.attr("src"),a(document).mousemove(function(i){r.mouseIsDown&&r.mousedown(i)}).mouseup(function(){if(r.mouseIsDown&&(r.mouseIsDown=!1,0===jQuery(".version-3-4").size()&&1===r.input.closest(".media-modal").size())){if("readonly"==jQuery('label.setting[data-setting="title"] input').attr("readonly"))return;r.isLoading=!0,tst.scrollTop=r.input.closest(".attachment-info").scrollTop(),tst.previewButtonStatus=jQuery(".theiaSmartThumbnails_mediaUpload ._previewButton").val(),r.imageOverlay.addClass("_loader"),r.input.change()}}),r.imageOverlay.mousedown(function(i){r.isLoading||(r.mouseIsDown=!0,r.mousedown(i))}).mousemove(function(i){r.mouseIsDown&&r.mousedown(i)}),a(document).ajaxComplete((i=r,function(){i.isLoading=!1,i.imageOverlay.removeClass("_loader")}))},r.mousedown=function(i){i.preventDefault();var t=r.image.offset(),e=i.pageX-t.left,o=i.pageY-t.top;r.setPosition(e,o)},r.setPosition=function(i,t){r.position.x=Math.max(0,Math.min(1,i/r.image.width())),r.position.y=Math.max(0,Math.min(1,t/r.image.height())),1==r.input.length?r.input.val("["+r.position.x+","+r.position.y+"]"):2==r.input.length&&(a(r.input[0]).val(r.position.x),a(r.input[1]).val(r.position.y)),r.refreshPreview()},r.refreshPreview=function(){for(var i in r.crosshair.css({left:r.position.x*r.image.width(),top:r.position.y*r.image.height()}),r.options.sizes){var t,e,o,a,n=r.options.sizes[i],s=tst.imageResizeDimensions(r.imageObject.width,r.imageObject.height,n.width,n.height,r.position.x,r.position.y);r.imageObject.width-s[6]?(t=r.imageObject.width/r.imageObject.height*s[5],e=s[5],o="auto",a=s[5]):(t=s[4],e=r.imageObject.height/r.imageObject.width*s[4],o=s[4],a="auto"),n.image.css({left:-s[2]/r.imageObject.width*t,top:-s[3]/r.imageObject.height*e,width:o,height:a})}},r.init()},tst.imageResizeDimensions=function(i,t,e,o,a,n){var s=i/t,r=Math.min(e,i),h=Math.min(o,t);r||(r=Math.floor(h*s)),h||(h=Math.floor(r/s));var m=Math.max(r/i,h/t),u=Math.round(r/m),p=Math.round(h/m),c=Math.floor((i-u)*a),d=Math.floor((t-p)*n);return[0,0,Math.round(c),Math.round(d),Math.round(r),Math.round(h),Math.round(u),Math.round(p)]};
//# sourceMappingURL=sourcemaps/tst-admin.min.js.map
